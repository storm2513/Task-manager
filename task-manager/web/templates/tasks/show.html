{% extends 'base.html' %}

{% block title %}Task info{% endblock %}
{% load task_tags %}
{% block content %}
<h2>Task info</h2>
<h3><span class="badge badge-secondary">ID</span> {{task.id}}</h3>
<h3><span class="badge badge-secondary">Title</span> {{task.title}}</h3>
<h3><span class="badge badge-secondary">Note</span> {{task.note}}</h3>
<h3><span class="badge badge-secondary">Category</span><a href="{% url 'task_manager:tasks_by_category' category.id %}"> {{category.name}}</a></h3>
<h3><span class="badge badge-secondary">Priority</span><a href="{% url 'task_manager:tasks_by_priority' task.priority %}"> {{priority}}</a></h3>
<h3><span class="badge badge-secondary">Status</span><a href="{% url 'task_manager:tasks_by_status' task.status %}"> {{status}}</a></h3>
<h3><span class="badge badge-secondary">Created at</span> {{task.created_at}}</h3>
<h3><span class="badge badge-secondary">Updated at</span> {{task.updated_at}}</h3>
<h3><span class="badge badge-secondary">Event</span> {{task.is_event}}</h3>
<h3><span class="badge badge-secondary">Start time</span> {{task.start_time}}</h3>
<h3><span class="badge badge-secondary">End time</span> {{task.end_time}}</h3>
<h3><span class="badge badge-secondary">Parent task</span>
{% if parent_task_title is not None %}
<a href="{% url 'task_manager:show_task' task.parent_task_id%}">{{ parent_task_title }}</a>
{% else %}
{{ parent_task_title }}
{% endif %}
</h3>
<h3><span class="badge badge-secondary">Assigned user</span> {{assigned_user}}</h3>
{% if inner_tasks %}
  <h3><span class="badge badge-secondary">Inner tasks</span>
    {% for inner_task in inner_tasks %}
      <a href="{% url 'task_manager:show_task' inner_task.id%}">{{ inner_task.title }}</a>
    {% endfor %}
  </h3>
{% endif %}
<h3><span class="badge badge-secondary">Creator</span> {{creator}}</h3>

<input class='btn btn-primary' type=button value="Back" onClick="javascript:history.go(-1);">
<a href="{% url 'task_manager:edit_task' task.id %}" class='btn btn-warning'>Edit</a>
<form style='display: inline-block;' action="{% url 'task_manager:delete_task' task.id %}" method='post'>
  {% csrf_token %}
  <button type='submit' class='btn btn-danger' onclick="return confirm('Are you sure you want to delete this task?')">Delete</button>
</form>
{% endblock %}